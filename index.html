<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ìƒí’ˆ ì¡°íšŒ</title>
<link rel="icon" type="image/png" href="android-chrome-512x512 (1).ico">
<link rel="stylesheet" as="style" crossorigin
      href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.css">
<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>

<style>
:root {
  --bg-gradient: radial-gradient(circle at top left, #f9a8d4 0, #e5e7eb 40%, #e0f2fe 100%);
  --card-bg: rgba(255, 255, 255, 0.96);
  --accent: #f472b6;
  --accent-soft: #fb7185;
  --text-main: #111827;
  --text-muted: #6b7280;
  --border-subtle: rgba(148, 163, 184, 0.35);
  --radius-xl: 18px;
  --shadow-soft: 0 18px 45px rgba(15, 23, 42, 0.18);
}
* { box-sizing: border-box; }
body {
  margin:0; padding:24px; min-height:100vh;
  font-family:'Pretendard',-apple-system,BlinkMacSystemFont,system-ui,sans-serif;
  background:var(--bg-gradient);
  display:flex; align-items:center; justify-content:center;
  color: var(--text-main);
}
.app-shell {
  width: 100%; max-width: 1400px;
  background: var(--card-bg);
  border-radius: 28px;
  box-shadow: var(--shadow-soft),0 0 0 1px rgba(255,255,255,0.7);
  padding:22px 24px 26px;
  position: relative;
  overflow: hidden;
}
.header {
  display:flex; justify-content:space-between; align-items:center; gap:16px; margin-bottom:18px;
}
.header-left { display:flex; align-items:center; gap:12px; }
.logo-pill {
  width:40px;height:40px;border-radius:999px;
  background:linear-gradient(135deg,#f9a8d4,#f97316);
  display:flex; align-items:center; justify-content:center;
  color:white;font-size:20px;
  box-shadow:0 8px 18px rgba(248,113,113,0.4);
}
.title-wrap h1 { margin:0; font-size:19px; display:flex; align-items:center; gap:6px;}
.title-tag { font-size:11px; padding:2px 7px; border-radius:999px; background:#fee2e2; color:#b91c1c; border:1px solid rgba(248,113,113,0.4);}
.title-wrap p { margin:3px 0 0; font-size:12px; color:var(--text-muted);}
.header-right { text-align:right; font-size:11px; color:var(--text-muted);}
.header-right span { font-weight:600; color:#0f766e;}
.pill-label { display:inline-flex; align-items:center; gap:4px; font-size:11px; padding:3px 9px; border-radius:999px; background:#eff6ff; color:#1d4ed8; }
.pill-dot { width:6px;height:6px;border-radius:50%; background:#22c55e;}
.content-row { display:grid; grid-template-columns:minmax(0,0.7fr) minmax(0,2.3fr); gap:16px; align-items:flex-start; }
.card { background:rgba(255,255,255,0.95); border-radius:var(--radius-xl); padding:14px 14px 16px; border:1px solid var(--border-subtle); box-shadow:0 10px 30px rgba(15,23,42,0.08);}
.card-title { font-size:13px; margin:0 0 8px; display:flex; align-items:center; gap:6px;}
.card-sub { font-size:11px; margin:0 0 10px; color:var(--text-muted);}
.search-box { display:flex; flex-direction:column; gap:8px; margin-top:6px; }
.input-wrap { position:relative; }
.input-wrap input[type=text] {
  width:100%; padding:9px 36px 9px 32px; font-size:13px;
  border-radius:999px; border:1px solid rgba(148,163,184,0.8); outline:none;
  background:#f9fafb;
  transition:border-color 0.18s ease, box-shadow 0.18s ease, background 0.18s ease;
}
.input-wrap input::placeholder { color:#9ca3af; font-size:12px; }
.input-wrap input:focus { background:#fff; border-color:#fb7185; box-shadow:0 0 0 1px rgba(251,113,133,0.55),0 10px 25px rgba(248,113,113,0.18);}
.input-icon-left { position:absolute; left:10px; top:50%; transform:translateY(-50%); font-size:14px; color:#9ca3af;}
.input-icon-right { position:absolute; right:10px; top:50%; transform:translateY(-50%); font-size:11px; color:#9ca3af;}
.button-row { display:flex; flex-wrap:nowrap; align-items:center; gap:10px; margin-top:4px; overflow-x:auto;}
button#searchBtn {
  padding:7px 16px; font-size:13px; border-radius:999px; border:none; cursor:pointer;
  background:linear-gradient(135deg,#f472b6,#fb7185); color:white; font-weight:500;
  display:inline-flex; align-items:center; gap:6px;
  transition: transform 0.12s ease, box-shadow 0.12s ease, opacity 0.12s ease;
}
button#searchBtn:hover:not(:disabled){transform:translateY(-1px); box-shadow:0 16px 30px rgba(248,113,113,0.45);}
button#searchBtn:active:not(:disabled){transform:translateY(0px) scale(0.99); box-shadow:0 8px 18px rgba(248,113,113,0.3);}
button#searchBtn:disabled{opacity:0.55; cursor:default; box-shadow:none;}
.status { font-size:11px; color:var(--text-muted); margin-top:4px; }
.status strong{ color:#4b5563; }
.result-card { max-height:620px; overflow:hidden; display:flex; flex-direction:column;}
.result-header-row { display:flex; justify-content:space-between; align-items:center; gap:8px; margin-bottom:2px; }
.result-header-right { display:inline-flex; align-items:center; gap:6px; font-size:11px; color:var(--text-muted);}
.result-table-wrap { margin-top:10px; border-radius:14px; overflow:hidden; border:1px solid var(--border-subtle); background:#f9fafb;}
.result-scroll { max-height:520px; overflow:auto; }

/* í…Œì´ë¸” */
table { width:100%; border-collapse:collapse; font-size:13px; background:#fff; table-layout:fixed; }
th, td { border-bottom:1px solid #e5e7eb; padding:8px 10px; text-align:left; vertical-align:middle; word-break:keep-all; }
th { background:#f9fafb; font-weight:600; position:sticky; top:0; z-index:1; cursor:col-resize; }
tr:nth-child(even) td{background:#fdf2f8;}
tr:hover td{background:#fce7f3;}
th.col-product, td.col-product { width:16.66%; }
th.col-color, td.col-color { width:8.33%; }
th.col-pcode, td.col-pcode, th.col-warehouse, td.col-warehouse { width:10%; }

/* ê¸°íƒ€ ìŠ¤íƒ€ì¼ */
.stock-pill { font-size:11px; padding:2px 7px; border-radius:999px; display:inline-flex; align-items:center; gap:4px; border:1px solid transparent; }
.stock-pill-dot { width:6px; height:6px; border-radius:50%; }
.stock-pill-green { background:#ecfdf3; color:#166534; border-color:rgba(34,197,94,0.45);}
.stock-pill-green .stock-pill-dot{background:#22c55e;}
.stock-pill-yellow{background:#fef9c3; color:#854d0e; border-color:rgba(250,204,21,0.7);}
.stock-pill-yellow .stock-pill-dot{background:#facc15;}
.stock-pill-red{background:#fee2e2; color:#b91c1c; border-color:rgba(239,68,68,0.7);}
.stock-pill-red .stock-pill-dot{background:#ef4444;}
.product-name-cell{position:relative;padding-left:26px;cursor:pointer;}
.op-status-dot{position:absolute;left:10px;top:50%;transform:translateY(-50%);width:9px;height:9px;border-radius:999px;border:2px solid #fff;box-shadow:0 0 0 1px rgba(148,163,184,0.4);}
.op-status-dot--on{background:#22c55e;}
.op-status-dot--end{background:#f97316;}
.op-status-dot--stop{background:#ef4444;}
.op-status-dot--pause{background:#eab308;}
</style>
</head>
<body>
<div class="app-shell">
  <div class="header">
    <div class="header-left">
      <div class="logo-pill">ğŸ§¸</div>
      <div class="title-wrap">
        <h1>ìƒí’ˆ ì¡°íšŒ <span class="title-tag">í™”ì´íŠ¸ìƒŒì¦ˆ</span></h1>
        <p>ìƒí’ˆ ì •ë³´ ã† ì¬ê³ ë¥¼ í•œë²ˆì— í™•ì¸í•˜ì„¸ìš”.</p>
      </div>
    </div>
    <div class="header-right">
      <div class="pill-label"><span class="pill-dot"></span> PlayMD ê¸°ë°˜</div>
      <div style="margin-top:6px;">ì¬ê³  ê¸°ì¤€<br><span id="stockInfo">ë¡œë”© ì¤‘...</span></div>
    </div>
  </div>

  <div class="content-row">
    <div class="card">
      <h2 class="card-title">ğŸ” ê²€ìƒ‰</h2>
      <p class="card-sub">ìƒí’ˆëª…ì— í¬í•¨ëœ ë‹¨ì–´ë¡œ ê²€ìƒ‰í•  ìˆ˜ ìˆì–´ìš”.</p>
      <div class="search-box">
        <div class="input-wrap">
          <span class="input-icon-left">âŒ¨ï¸</span>
          <input type="text" id="keyword" placeholder="(ì˜ˆ: ë³¼ë“œë¦°, ë²¨ë£¨ì˜¤ ë“±)" />
          <span class="input-icon-right">Enter â†µ</span>
        </div>
        <div class="button-row">
          <button id="searchBtn" disabled>âœ¨ ê²€ìƒ‰</button>
          <label><input type="checkbox" id="toggleWarehouse" /> ì°½ê³ </label>
          <label><input type="checkbox" id="toggleMaterial" /> ì†Œì¬</label>
          <label><input type="checkbox" id="toggleOperation" checked /> ìš´ì˜</label>
        </div>
        <div class="status" id="status">ë°ì´í„° ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
      </div>
    </div>

    <div class="card result-card">
      <div class="result-header-row">
        <h2 class="card-title">ğŸ“‹ ê²€ìƒ‰ ê²°ê³¼</h2>
        <div class="result-header-right">
          <span>ì •ë ¬</span>
          <select id="sortMode" class="sort-select">
            <option value="nameAsc">ìƒí’ˆëª… â†‘</option>
            <option value="nameDesc">ìƒí’ˆëª… â†“</option>
            <option value="stockDesc">ì¬ê³  ë§ì€ ìˆœ</option>
          </select>
        </div>
      </div>
      <div id="result">
        <div class="no-result">ì•„ì§ ê²€ìƒ‰ ì „ì´ì—ìš”. í‚¤ì›Œë“œë¥¼ ì…ë ¥í•˜ê³  <strong>ê²€ìƒ‰í•˜ê¸°</strong>ë¥¼ ëˆŒëŸ¬ì£¼ì„¸ìš”.</div>
      </div>
    </div>
  </div>
</div>

<script>
const searchBtn = document.getElementById('searchBtn');
const keywordInput = document.getElementById('keyword');
const toggleWarehouseInput = document.getElementById('toggleWarehouse');
const sortModeSelect = document.getElementById('sortMode');
const resultEl = document.getElementById('result');

let products=[], stockEntriesByColorCode={}, sizeByColorCode={}, showWarehouse=false, sortMode='nameAsc';

function search() {
  const kw = keywordInput.value.trim().toLowerCase();
  if (!kw) return;

  let filtered = products.filter(p=>p.productName.toLowerCase().includes(kw));

  filtered.sort((a,b)=>{
    if(showWarehouse){
      const entriesA = stockEntriesByColorCode[a.colorCode]||[];
      const entriesB = stockEntriesByColorCode[b.colorCode]||[];
      const whA = entriesA.find(e=>e.warehouse==='ì£¼í¬ë¬¼ë¥˜')?'0':entriesA[0]?.warehouse||'';
      const whB = entriesB.find(e=>e.warehouse==='ì£¼í¬ë¬¼ë¥˜')?'0':entriesB[0]?.warehouse||'';
      const whCmp = whA.localeCompare(whB,'ko-KR');
      if(whCmp!==0) return whCmp;
    }
    const nameCmp = a.productName.localeCompare(b.productName,'ko-KR');
    if(nameCmp!==0) return nameCmp;
    return a.colorName.localeCompare(b.colorName,'ko-KR');
  });

  let html = '<table><thead><tr><th>ìƒí’ˆëª…</th><th>ì¹¼ë¼ëª…</th><th>ì¬ê³ </th></tr></thead><tbody>';
  filtered.forEach(p=>{
    const totalStock = (stockEntriesByColorCode[p.colorCode]||[]).reduce((sum,e)=>sum+Number(e.qty||0),0);
    html+=`<tr><td>${p.productName}</td><td>${p.colorName}</td><td>${totalStock}</td></tr>`;
  });
  html+='</tbody></table>';
  resultEl.innerHTML=html;
}

searchBtn.addEventListener('click',search);
keywordInput.addEventListener('keydown',e=>{if(e.key==='Enter')search();});
toggleWarehouseInput.addEventListener('change',()=>{showWarehouse=toggleWarehouseInput.checked; if(keywordInput.value) search();});
sortModeSelect.addEventListener('change',()=>{sortMode=sortModeSelect.value; if(keywordInput.value) search();});

// --- ì—¬ê¸°ì„œ CSV ë¡œë”© ë° ë°ì´í„° ì´ˆê¸°í™”ëŠ” ê¸°ì¡´ ì½”ë“œ ì°¸ê³  ---

</script>
</body>
</html>
