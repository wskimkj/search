<!DOCTYPE html>
<html lang="ko">
<head>
  <link rel="stylesheet" href="https://wskimkj.github.io/admin/css/common.css">

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Search</title>

  <!-- 파비콘 -->
  <link rel="icon" type="image/png" href="android-chrome-512x512 (1).ico">

  <!-- 폰트 -->
  <link rel="stylesheet" as="style" crossorigin
        href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.css">

  <!-- CSV 파서 -->
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>

  <style>
/* ===================== FINAL CSS (기능 유지 / 레이아웃 정상 / pill 복구) ===================== */
:root{
  --page-bg: #f7f4ff;
  --page-bg2:#eef6ff;

  --card-bg: rgba(255,255,255,.88);
  --card-stroke: rgba(170,150,230,.22);

  --text-main: #2f2a3a;
  --text-muted: #6e6a82;

  --pink: #ff8fbc;
  --lilac:#b8a7ff;

  --radius-xl: 18px;
  --shadow-main: 0 18px 50px rgba(30,18,60,.10);
  --shadow-card: 0 10px 26px rgba(30,18,60,.08);
}

*{box-sizing:border-box;}
html,body{height:100%;}

body{
  margin:0;
  font-family:"Pretendard",system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
  color:var(--text-main);
  background:
    radial-gradient(900px 520px at 20% 18%, rgba(255,143,188,.25), transparent 60%),
    radial-gradient(900px 520px at 82% 24%, rgba(184,167,255,.20), transparent 58%),
    linear-gradient(180deg, var(--page-bg), var(--page-bg2));
}

/* ===== layout ===== */
.app-shell{
  min-height:100vh;
  padding:24px;
}
.inner-shell{
  max-width:1400px;
  margin:0 auto;
  background:var(--card-bg);
  border:1px solid var(--card-stroke);
  border-radius:24px;
  padding:18px 20px 20px;
  box-shadow:var(--shadow-main);
}

/* ===== header ===== */
.header{
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  margin-bottom:14px;
}
.title-wrap h1{
  margin:0;
  font-size:20px;
  font-weight:800;
  display:flex;
  gap:10px;
  cursor:pointer;
}
.title-tag{
  font-size:11px;
  padding:4px 10px;
  border-radius:999px;
  background:rgba(255,143,188,.25);
  border:1px solid rgba(255,143,188,.35);
}
.header-right{
  font-size:12px;
  color:var(--text-muted);
}

/* ===== cards ===== */
.card{
  background:#fff;
  border:1px solid var(--card-stroke);
  border-radius:22px;
  box-shadow:var(--shadow-card);
}
.card-search{
  align-items: stretch;
}

/* Result 영역 */
.result-card{
  padding: 14px 16px 16px;
}
#result{
  min-height: 0 !important;
}
.no-result{
  padding: 14px 0;
  margin: 0;
  font-size: 12px;
  color: var(--text-muted);
}

/* ===== search ===== */
.card-search{
  display:flex;
  gap:14px;
  padding:12px 14px;
  align-items:flex-start;
}
.card-title{
  font-size:13px;
  font-weight:700;
  margin:0;
  white-space:nowrap;
}
.search-box{
  flex:1;
  display:flex;
  flex-direction:column;
  gap:10px;
}

/* ===== slim search bar ===== */
.input-wrap.slim{
  position:relative;
}
.input-wrap.slim input{
  height: 42px;
  padding: 0 78px 0 42px;
  border-radius: 999px;
  border: 1px solid rgba(170,150,230,.22);
  background: rgba(245,243,251,.75);
  font-size: 13px;
}
.input-wrap.slim input:focus{
  outline:none;
  border-color: rgba(255,143,188,.55);
  box-shadow: 0 0 0 4px rgba(255,143,188,.16);
}
.input-wrap.slim .input-icon-left{
  position:absolute;
  left:14px;
  top:50%;
  transform:translateY(-50%);
  display:inline-flex;
  align-items:center;
  justify-content:center;
  width:18px;
  height:18px;
  opacity:.95;
}
.icon-search{ width:18px; height:18px; display:block; }
.input-wrap.slim .input-icon-right{
  position:absolute;
  right:14px;
  top:50%;
  transform:translateY(-50%);
  font-size:11px;
  color: rgba(110,106,130,.55);
  pointer-events:none;
}
.clear-btn{
  position:absolute;
  right:52px;
  top:50%;
  transform:translateY(-50%);
  width:22px;
  height:22px;
  border-radius:999px;
  border:1px solid rgba(170,150,230,.18);
  background: rgba(255,255,255,.65);
  color: rgba(110,106,130,.75);
  font-size:16px;
  line-height:1;
  cursor:pointer;
  display:none;
}
.clear-btn:hover{
  background: rgba(255,143,188,.12);
  border-color: rgba(255,143,188,.22);
}

/* ===== pills ===== */
.type-pills{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
}
.type-pill{
  height:34px;
  padding:0 14px;
  border-radius:999px;
  border:1px solid rgba(170,150,230,.25);
  background:#fff;
  cursor:pointer;
  display:inline-flex;
  align-items:center;
  font-size:13px;
  user-select:none;
  transition: background .12s ease, border-color .12s ease, transform .06s ease;
}
.type-pill input{ display:none; }
.type-pill.active{
  background:rgba(255,143,188,.25);
  border-color:rgba(255,143,188,.45);
}
.type-pill:active{ transform: scale(.98); }

/* ===== op legend ===== */
#opLegend.op-legend{
  display:none;
  margin:6px 0 10px;
  gap:12px;
}
#opLegend .op-legend-item{
  display:inline-flex;
  align-items:center;
  gap:6px;
  font-size:12px;
  color:var(--text-muted);
}
.op-legend-dot{
  width:10px;
  height:10px;
  border-radius:50%;
  border:2px solid #fff;
  box-shadow:0 0 0 1px rgba(170,150,230,.25);
}
.op-legend-dot.on{background:#22c55e;}
.op-legend-dot.end{background:#f97316;}
.op-legend-dot.stop{background:#ef4444;}
.op-legend-dot.pause{background:#eab308;}

/* ===== table ===== */
.result-table-wrap{
  border-radius:16px;
  overflow:hidden;
  border:1px solid rgba(170,150,230,.18);
}
.result-scroll{
  max-height:520px;
  overflow:auto;
}
table{
  width:100%;
  border-collapse:collapse;
  table-layout:auto;
  font-size:12px;
}
th,td{
  padding:10px 12px;
  border-bottom:1px solid rgba(170,150,230,.15);
}
th{
  background:#fff;
  position:sticky;
  top:0;
  z-index:2;
  user-select:none;
}
tr:nth-child(even) td{background:#faf9fe;}
tr:hover td{background:rgba(255,143,188,.18);}

/* column resize */
th{ position:sticky; }
.resize-handle{
  position:absolute;
  top:0;
  right:0;
  width:10px;
  height:100%;
  cursor:col-resize;
}
.resize-handle::after{
  content:"";
  position:absolute;
  top:20%;
  bottom:20%;
  left:50%;
  width:1px;
  transform:translateX(-50%);
  background:rgba(170,150,230,.35);
  opacity:0;
}
th:hover .resize-handle::after{opacity:1;}
th.sortable{cursor:pointer; position:relative;}
.sort-indicator{
  margin-left:4px;
  font-size:10px;
  color:var(--pink);
}

/* product/status */
.product-name-cell{
  position:relative;
  padding-left:28px;
}
.op-status-dot{
  position:absolute;
  left:10px;
  top:50%;
  transform:translateY(-50%);
  width:10px;
  height:10px;
  border-radius:50%;
  border:2px solid #fff;
  box-shadow:0 0 0 1px rgba(170,150,230,.25);
}
.op-status-dot--on    { background:#22c55e; }
.op-status-dot--end   { background:#f97316; }
.op-status-dot--stop  { background:#ef4444; }
.op-status-dot--pause { background:#eab308; }

/* stock pill */
.stock-pill{
  font-size:11px;
  padding:3px 8px;
  border-radius:999px;
  display:inline-flex;
  align-items:center;
  gap:6px;
}
.stock-pill-dot{
  width:6px;
  height:6px;
  border-radius:50%;
}
.stock-pill-green{background:#e9fbf3;}
.stock-pill-green .stock-pill-dot{background:#22c55e;}
.stock-pill-yellow{background:#fff7d6;}
.stock-pill-yellow .stock-pill-dot{background:#facc15;}
.stock-pill-red{background:#ffe4ee;}
.stock-pill-red .stock-pill-dot{background:#ff8fbc;}

/* misc */
.kw-mark{background:yellow;padding:0 2px;}
#toast{
  position:fixed;
  right:18px;
  bottom:18px;
  padding:10px 12px;
  border-radius:14px;
  background:#fff;
  border:1px solid rgba(255,143,188,.35);
  opacity:0;
}
#toast.show{opacity:1;}

#status{
  font-size: 12px !important;
  line-height: 1.2 !important;
  margin-top: 6px !important;
  color: var(--text-muted) !important;
}
#status strong{
  font-size: 12px !important;
  font-weight: 600 !important;
  color: var(--text-main) !important;
}

@media(max-width:860px){
  .header{flex-direction:column;gap:10px;}
  .card-search{flex-direction:column;}
}

/* 기존 ⌨️ 텍스트 아이콘 제거 대비 */
.input-wrap .input-icon-left{ font-size:0; }
  </style>
</head>

<body>
  <div class="app-shell">
    <div class="inner-shell">
      <div class="header">
        <div class="header-left">
          <div class="title-wrap">
            <h1>
              Search
              <span class="title-tag"> PlayMD </span>
            </h1>
          </div>
        </div>
        <div class="header-right">
          <div style="margin-top: 4px;">
            <span id="stockInfo">로딩 중...</span>
          </div>
        </div>
      </div>

      <div class="content-row">
        <!-- 검색 카드 -->
        <div class="card card-search">
          <div class="search-box">
            <div class="input-wrap slim">
              <span class="input-icon-left" aria-hidden="true">
                <svg class="icon-search" viewBox="0 0 24 24" fill="none">
                  <path d="M11 19a8 8 0 1 1 0-16 8 8 0 0 1 0 16Z" stroke="rgba(110,106,130,.55)" stroke-width="2"/>
                  <path d="M20 20l-3.5-3.5" stroke="rgba(255,143,188,.80)" stroke-width="2" stroke-linecap="round"/>
                </svg>
              </span>

              <input type="text" id="keyword" placeholder="(예: 상품명, 상품코드, 칼라코드 등)" />
              <button type="button" id="clearKeyword" class="clear-btn" aria-label="검색어 지우기">×</button>
              <span class="input-icon-right">Enter ↵</span>
            </div>

            <div class="type-pills" id="filterPills">
              <label class="type-pill" for="warehouse">
                <input type="checkbox" id="warehouse">
                창고
              </label>

              <label class="type-pill" for="material">
                <input type="checkbox" id="material">
                소재
              </label>

              <label class="type-pill" for="stock">
                <input type="checkbox" id="stock">
                재고
              </label>
            </div>

            <div class="status" id="status">
              데이터 불러오는 중...
            </div>
          </div>
        </div>

        <!-- 결과 카드 -->
        <div class="card result-card">
          <div class="result-header-row">
            <h2 class="card-title"><span class="icon"></span></h2>
          </div>

          <div id="opLegend" class="op-legend">
            <span class="op-legend-item"><span class="op-legend-dot on"></span> 운영</span>
            <span class="op-legend-item"><span class="op-legend-dot end"></span> 소진 후 종료</span>
            <span class="op-legend-item"><span class="op-legend-dot stop"></span> 단종</span>
            <span class="op-legend-item"><span class="op-legend-dot pause"></span> 일시 중단</span>
          </div>

          <div id="result">
            <div class="no-result">검색어 입력 후 Enter를 눌러주세요.</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div id="toast" class="toast">복사</div>

  <!-- ✅ 외부 스크립트 -->
  <script src="./search.js"></script>
</body>
</html>
